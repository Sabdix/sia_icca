
@{
    ViewBag.Title = "Nueva Solicitud";
    Layout = "~/Views/Shared/_LayoutViaticos.cshtml";
    <script>
        nodoMenu = "solicitud";
        submenu = "";
    </script>
}
@model IICA.Models.Entidades.Viaticos.SolicitudViatico
@using System.Web.Script.Serialization;

<ul class="breadcrumb">
    <li>
        <p>VIATICOS</p>
    </li>
    <li><a href="#" class="active">Registro de Solicitud</a> </li>
</ul>

<div class="row">
    <div class="col-md-12">
        <ul class="nav nav-tabs" role="tablist">
            <li class="active">
                <a href="#tab-tipoViaje" role="tab" data-toggle="tab">Tipo de viaje</a>
            </li>
            <li>
                <a href="#tab-propositoResultados" role="tab" data-toggle="tab">Propósito y resultados</a>
            </li>
            <li>
                <a href="#tab-itinerario" role="tab" data-toggle="tab">Itinerario</a>
            </li>
            <li id="li-importeExt">
                <a href="#tab-importeExt" role="tab" data-toggle="tab">Gastos extras</a>
            </li>
            <li id="li-resumen">
                <a href="#tab-resumen" role="tab" data-toggle="tab">Resumen</a>
            </li>
        </ul>
        <div class="tools">
            <a href="javascript:;" class="collapse"></a>
            <a href="#grid-config" data-toggle="modal" class="config"></a>
            <a href="javascript:;" class="reload"></a>
            <a href="javascript:;" class="remove"></a>
        </div>
        <div class="tab-content">
            <div class="tab-pane active" id="tab-tipoViaje">
                <div class="col-md-12">
                    <h3>
                        <span class="semi-bold">Tipo</span> de viaje
                    </h3>
                    <div class="col-md-10 col-sm-10 col-md-10 col-vlg-offset-2">
                        <form id="form-tipoViaje">
                            <div class="row form-row">
                                <div class="col-md-4">
                                    <label class="form-label">Fecha de solitud</label>
                                    @Html.TextBoxFor(x => x.fechaAlta, new { @class = "form-control" })
                                    @Html.ValidationMessageFor(x => x.fechaAlta, "", new { @class = "error" })
                                </div>
                            </div>
                            <div class="row form-row">
                                <div class="col-md-4">
                                    <label class="form-label">Tipo de viaje</label>
                                    @Html.DropDownListFor(x => x.tipoViaje.idTipoViaje, (IEnumerable<SelectListItem>)ViewBag.TiposViaje, "SELECCIONE EL TIPO DE VIAJE",
                                 new { @class = "select-iica", style = "width: 100%;",id="tipoViajeSol" })
                                    @Html.ValidationMessageFor(x => x.tipoViaje.idTipoViaje, "", new { @class = "error" })
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Tipo de transportación</label>
                                    @Html.DropDownListFor(x => x.medioTransporte.idMedioTransporte, (IEnumerable<SelectListItem>)ViewBag.TiposMediosTrasnporte, "SELECCIONE EL TIPO DE TRASNPORTE",
                                  new { @class = "select-iica", style = "width: 100%;" })
                                    @Html.ValidationMessageFor(x => x.medioTransporte.idMedioTransporte, "", new { @class = "error" })
                                </div>
                            </div>
                            <div class="row form-row"><br /></div>
                            <div class="row form-row">
                                <div class="col-md-4">
                                    <label class="form-label">Fecha de inicio</label>
                                    @Html.TextBoxFor(x => x.fechaInicio, new { @class = "form-control" })
                                    @Html.ValidationMessageFor(x => x.fechaInicio, "", new { @class = "error" })
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Fecha de fin</label>
                                    @Html.TextBoxFor(x => x.fechaFin, new { @class = "form-control" })
                                    @Html.ValidationMessageFor(x => x.fechaFin, "", new { @class = "error" })
                                </div>
                            </div>
                        </form>
                        <div class="row form-row"><br /></div>
                    </div>
                </div>
            </div>
            <div class="tab-pane" id="tab-propositoResultados">
                <div class="row">
                    <div class="col-md-12">
                        <h3>
                            <span class="semi-bold">Propósito y</span> resultados
                        </h3>
                        <div class="col-md-10 col-sm-10 col-md-10 col-vlg-offset-2">
                            <form id="form-proposito">
                                <div class="row form-row">
                                    <div class="col-md-8">
                                        <label class="form-label">Propósito</label>
                                        @Html.TextAreaFor(x => x.proposito, new { @class = "form-control" })
                                        @Html.ValidationMessageFor(x => x.proposito, "", new { @class = "error" })
                                    </div>
                                </div>
                                <div class="row form-row">
                                    <div class="col-md-8">
                                        <label class="form-label">Resultados esperados</label>
                                        @Html.TextAreaFor(x => x.resultadosEsperados, new { @class = "form-control" })
                                        @Html.ValidationMessageFor(x => x.resultadosEsperados, "", new { @class = "error" })
                                    </div>
                                </div>
                                <div class="row form-row">
                                    <div class="col-md-4">
                                        <label class="form-label">Justificación</label>
                                        @Html.DropDownListFor(x => x.justificacion.idJustificacion, (IEnumerable<SelectListItem>)ViewBag.TiposJustificacion, "SELECCIONE LA JUSTIFICACIÓN",
                                   new { @class = "select-iica", style = "width: 100%;" })
                                        @Html.ValidationMessageFor(x => x.justificacion.idJustificacion, "", new { @class = "error" })
                                    </div>
                                </div>
                                <div class="row form-row">
                                    <div class="col-md-8">
                                        <label class="form-label">Condiciones especiales</label>
                                        @Html.TextAreaFor(x => x.condicionesEspeciales, new { @class = "form-control" })
                                        @Html.ValidationMessageFor(x => x.condicionesEspeciales, "", new { @class = "error" })
                                    </div>
                                </div>
                            </form>
                            <div class="row form-row"><br /></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-pane" id="tab-itinerario">
                <div class="row">
                    <div class="col-md-12">
                        <h3><span class="semi-bold">Itinerario del</span> viaje</h3>
                        <div class="grid simple ">
                            <div class="grid-title">
                                <h4>Itinerario <span class="semi-bold">de ida</span></h4>
                                <button type="button" onclick="MostrarModalAddItinerario(1)" style="float: right" class="btn btn-info btn-xs btn-mini">
                                    <i class="fa fa-plus-circle"></i>&nbsp;Agregar
                                </button>
                            </div>
                            <div class="grid-body ">
                                <table class="table table-hover no-more-tables" style="text-align: center;" id="tabla-itinerarioIda">
                                    <thead>
                                        <tr>
                                            <th style="width:10%;text-align: center;">Origen</th>
                                            <th style="width:10%;text-align: center;">Destino</th>
                                            <th style="width:10%;text-align: center;">Medio de transporte</th>
                                            <th style="width:10%;text-align: center;">Linea / No. de vuelo</th>
                                            <th style="width:10%;text-align: center;">Hora de salida</th>
                                            <th style="width:10%;text-align: center;">Hora de llegada</th>
                                            <th style="width:10%;text-align: center;">Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>
                        <div class="grid simple ">
                            <div class="grid-title">
                                <h4>Itinerario <span class="semi-bold">de regreso</span></h4>
                                <button type="button" onclick="MostrarModalAddItinerario(2)" style="float: right" class="btn btn-info btn-xs btn-mini">
                                    <i class="fa fa-plus-circle"></i>&nbsp;Agregar
                                </button>
                            </div>
                            <div class="grid-body ">
                                <table class="table table-hover table-condensed" style="text-align: center;" id="tabla-itinerarioRegreso">
                                    <thead>
                                        <tr>
                                            <th style="width:10%;text-align: center;">Origen</th>
                                            <th style="width:10%;text-align: center;">Destino</th>
                                            <th style="width:10%;text-align: center;">Medio de transporte</th>
                                            <th style="width:10%;text-align: center;">Linea / No. de vuelo</th>
                                            <th style="width:10%;text-align: center;">Hora de salida</th>
                                            <th style="width:10%;text-align: center;">Hora de llegada</th>
                                            <th style="width:10%;text-align: center;">Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-pane" id="tab-importeExt">
                <div class="row">
                    <div class="col-md-12">
                        <h3>
                            <span class="semi-bold">Gastos</span> extras
                        </h3>
                        <div class="row column-seperation">
                            <div class="col-md-6">
                                <form id="form-gastoExt1">
                                    <div class="col-md-6">
                                        <label class="form-label">Gasto</label>
                                        @Html.DropDownList("gasto_extra1", (IEnumerable<SelectListItem>)ViewBag.GastosExtra, "SELECCIONE UN GASTO",
                                      new { @class = "select-iica",id="gasto_extra1", style = "width: 100%;",
                                          data_val_required = "Seleccione un tipo de gasto.", data_val = "true" })
                                        @Html.ValidationMessage("gasto_extra1", new { @class = "error" })
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">Monto:</label>
                                        <input type="text" id="monto1" name="monto1" placeholder="Monto" class="form-control"
                                               data-val-required="Ingrese un monto."
                                               data-val-number="Este campo debe ser númerico"
                                               data-val="true" />
                                        @Html.ValidationMessage("monto1", new { @class = "error" })
                                    </div>
                                    <div class="col-md-3">
                                        <label style="color:#fff;" class="form-label">-</label>
                                        <button type="button" onclick="OnAddGastoExt(1)" class="btn btn-info btn-xs btn-mini">
                                            <i class="fa fa-plus-circle"></i>&nbsp;Agregar
                                        </button>
                                    </div>
                                </form>
                            </div>
                            <div class="col-md-6">
                                <form id="form-gastoExt2">
                                    <div class="col-md-6">
                                        <label class="form-label">Otros gastos (especificar)</label>
                                        <textarea type="text" id="gasto_extra2" , name="gasto_extra2" placeholder="Otros gastos (especificar)" class="form-control"
                                                  data-val-required="Ingrese una descripción."
                                                  data-val="true"></textarea>
                                        @Html.ValidationMessage("gasto_extra2", new { @class = "error" })
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">Monto:</label>
                                        <input type="text" id="monto2" name="monto2" placeholder="Monto" class="form-control"
                                               data-val-required="Ingrese un monto."
                                               data-val-number="Este campo debe ser númerico"
                                               data-val="true" />
                                        @Html.ValidationMessage("monto2", new { @class = "error" })
                                    </div>
                                    <div class="col-md-3">
                                        <label style="color:#fff;" class="form-label">-</label>
                                        <button type="button" onclick="OnAddGastoExt(2)" class="btn btn-info btn-xs btn-mini">
                                            <i class="fa fa-plus-circle"></i>&nbsp;Agregar
                                        </button>
                                    </div>
                                </form>
                            </div>
                            <div class="row form-row"><br /></div>
                        </div>
                        <br /><br />
                        <div class="row">
                            <div class="grid simple ">
                                <div class="grid-title">
                                    <h4>Lista <span class="semi-bold">de gastos</span></h4>
                                </div>
                                <div class="grid-body ">
                                    <table class="table table-hover table-condensed" style="text-align: center;" id="tabla-gastosExtras">
                                        <thead>
                                            <tr>
                                                <th style="width:10%;text-align: center;">Gasto</th>
                                                <th style="width:10%;text-align: center;">Monto</th>
                                                <th style="width:10%;text-align: center;">Acciones</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="tab-pane" id="tab-resumen">
                <div class="row">
                    <div class="col-md-12">
                        <h3><span class="semi-bold">Resumen</span> del viaje</h3>
                        
                        <!---aqui empiezas hacer la estructura para la visualizacion-->


                        <button type="button" id="btn-guardar-solViatico">Guardar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="modal-itinerario" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content" id="content-md-itinerario">
            </div>
        </div>
    </div>


    @section scripts {

        <link href="~/Content/assets/plugins/bootstrap-select2/select2.css" rel="stylesheet" />
        @* Son para el estilo de los select ya que estan en el layout pero no funcionan si no estan en cada vista *@
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link href="~/Content/webarch/css/webarch.css" rel="stylesheet" type="text/css" />

        <script src="~/Content/assets/plugins/accounting/accounting.min.js"></script>

        <link href="~/Content/assets/plugins/jquery-datatable/css/jquery.dataTables.css" rel="stylesheet" type="text/css" />
        <link href="~/Content/assets/plugins/datatables-responsive/css/datatables.responsive.css" rel="stylesheet" type="text/css" media="screen" />

        <link href="~/Content/assets/plugins/bootstrap-datepicker/css/datepicker.css" rel="stylesheet" type="text/css" />
        <link href="~/Content/assets/plugins/bootstrap-timepicker/css/bootstrap-timepicker.css" rel="stylesheet" type="text/css" />
        <link href="~/Content/assets/plugins/boostrap-clockpicker/bootstrap-clockpicker.min.css" rel="stylesheet" type="text/css" media="screen" />

        <script src="~/Content/assets/plugins/bootstrap-select2/select2.min.js"></script>

        <script src="~/Content/assets/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js" type="text/javascript"></script>
        <script src="~/Content/assets/plugins/bootstrap-timepicker/js/bootstrap-timepicker.min.js" type="text/javascript"></script>
        <script src="~/Content/assets/plugins/boostrap-clockpicker/bootstrap-clockpicker.min.js" type="text/javascript"></script>

        <script src="~/Content/assets/plugins/jquery-datatable/js/jquery.dataTables.min.js" type="text/javascript"></script>
        <script src="~/Content/assets/plugins/jquery-datatable/extra/js/dataTables.tableTools.min.js" type="text/javascript"></script>
        <script type="text/javascript" src="~/Content/assets/plugins/datatables-responsive/js/datatables.responsive.js"></script>
        <script type="text/javascript" src="~/Content/assets/plugins/datatables-responsive/js/lodash.min.js"></script>
        <script src="~/Content/assets/js/datatables.js"></script>


        <script src="~/Scripts/jquery.validate.min.js"></script>
        <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
        <script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>

        <script src="~/Content/assets/plugins/moment/moment.min.js"></script>

        <script>
            //Catalogos
            var mediosTransportes;
            mediosTransportes = @Html.Raw(new JavaScriptSerializer().Serialize(ViewBag.TiposMediosTrasnporte));
            var catGastosExtras;
            catGastosExtras = @Html.Raw(new JavaScriptSerializer().Serialize(ViewBag.GastosExtra));
        </script>

        <script src="~/Content/assets/js/Evt/Viativos/evtNuevaSolViatico.js"></script>
    }
